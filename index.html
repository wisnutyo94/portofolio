<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Booking De'Barba Barber</title>

<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

<style>
* {
  box-sizing: border-box;
  font-family: 'Merriweather', serif;
  margin: 0;
  padding: 0;
}
body {
  background-color: #000 !important;
  color: #fff;
  padding: 20px;
}
.container {
  max-width: 720px;
  margin: auto;
  background-color: #111 !important; 
  padding: 30px;
  border-radius: 22px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}
.logo {
  display: flex;
  justify-content: center;
  margin-bottom: 15px;
}
.logo img {
  max-width: 140px;
}
h1 {
  text-align: center;
  margin-bottom: 25px;
  font-size: 26px;
}
form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
label {
  font-size: 14px;
  margin-bottom: 6px;
  display: block;
}
input, select {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: 1px solid #333;
  font-size: 15px;
  background-color: #222 !important;
  color: #fff !important;
  height: 50px;
}
input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1);
}
button {
  padding: 16px;
  background-color: #fff;
  color: #000;
  border: none;
  border-radius: 18px;
  font-size: 16px;
  cursor: pointer;
  font-weight: bold;
}
button:hover {
  opacity: 0.8;
}
.powered {
  margin-top: 25px;
  text-align: center;
  font-size: 13px;
  color: #777;
}
option:disabled {
  color: #777;
}
</style>
</head>

<body>

<div class="container">

  <div class="logo">
    <img src="https://i.imgur.com/DssgKKJ.png" alt="Barba Barber Logo">
  </div>

  <h1>Booking De'Barba Barber</h1>

  <form id="bookingForm">

    <div>
      <label>Nama Lengkap</label>
      <input type="text" name="nama_lengkap" required>
    </div>

    <div>
      <label>Nomor Whatsapp</label>
      <input type="text" name="nomor_whatsapp" required pattern="[0-9]{10,15}">
    </div>

    <div>
      <label>Email</label>
      <input type="email" name="email" required>
    </div>

    <div>
      <label>Pilih Kapster</label>
      <select name="pilih_kapster" required>
        <option value="">-- Pilih Kapster --</option>
        <option>Bayu "Boy"</option>
        <option>Joel</option>
      </select>
    </div>

    <div>
      <label>Pilih Layanan</label>
      <select name="pilih_layanan" required>
        <option value="">-- Pilih Layanan --</option>
        <option>Regular Haircut - 50k</option>
        <option>Coloring - 200k</option>
        <option>Coloring - 300k</option>
        <option>Coloring - 400k</option>
      </select>
    </div>

    <div>
      <label>Pilih Tanggal</label>
      <input type="date" name="pilih_tanggal" id="pilih_tanggal" required>
    </div>

    <div>
      <label>Pilih Jam</label>
      <select name="pilih_jam" id="pilih_jam" required>
        <option value="">-- Pilih Jam --</option>
      </select>
    </div>

    <button type="submit">Booking Sekarang</button>
  </form>

  <div class="powered">
    Powered by De'Barba Barber Â© 2026
  </div>

</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbz_0A1AuIIDTWaQ3U43GJ9dV7sTP3eJBETzyp5Ab3WcJh3udSqUo5YeIa0hZNwrbbcIiQ/exec";
const WA_ADMIN = "6285706706607";

/* SIMULASI DATA BOOKING
   Nanti bisa diambil real dari Google Sheet */
const bookedData = {
  "2026-01-26": ["11.00", "13.00", "15.00"],
  "2026-01-27": ["12.00", "14.00", "16.00"]
};

const inputTanggal = document.getElementById("pilih_tanggal");
const selectJam = document.getElementById("pilih_jam");

function generateJam(tanggal) {
  selectJam.innerHTML = '<option value="">-- Pilih Jam --</option>';
  let bookedJam = bookedData[tanggal] || [];

  for (let jam = 11; jam <= 23; jam++) {
    let formatJam = String(jam).padStart(2, '0') + ".00";
    let option = document.createElement("option");
    option.value = formatJam;
    option.text = formatJam;

    if (bookedJam.includes(formatJam)) {
      option.disabled = true;
      option.text += " (Booked)";
    }

    selectJam.appendChild(option);
  }
}

inputTanggal.addEventListener("change", function () {
  generateJam(this.value);
});

document.getElementById("bookingForm").addEventListener("submit", e => {
  e.preventDefault();
  const f = e.target;

  const data = {
    nama_lengkap: f.nama_lengkap.value,
    nomor_whatsapp: f.nomor_whatsapp.value.replace(/\D/g,''),
    email: f.email.value,
    pilih_kapster: f.pilih_kapster.value,
    pilih_layanan: f.pilih_layanan.value,
    pilih_tanggal: f.pilih_tanggal.value,
    pilih_jam: f.pilih_jam.value
  };

  const pesan = 
`Booking De' Barba Barbershop

Nama: ${data.nama_lengkap}
Nomor Whatsapp: ${data.nomor_whatsapp}
Kapster: ${data.pilih_kapster}
Layanan: ${data.pilih_layanan}
Tanggal: ${data.pilih_tanggal}
Jam: ${data.pilih_jam}`;

  window.open(`https://wa.me/${WA_ADMIN}?text=${encodeURIComponent(pesan)}`, "_blank");

  const formData = new FormData(f);
  fetch(WEB_APP_URL, {
    method: "POST",
    body: formData
  })
  .then(res => console.log("Data tersimpan di Sheet"))
  .catch(err => console.log("Gagal kirim ke Sheet"));
});
</script>

</body>
</html>
